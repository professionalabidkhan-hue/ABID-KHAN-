<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership Gateway | ABID KHAN E-LEARNING HUB</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary-blue: #4fc3f7; --dark-bg: #07090d; --input-black: #000000; --border: rgba(255, 255, 255, 0.1); }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: radial-gradient(circle at top right, #1a1c2c, #07090d); color: #fff; min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 40px 0; position: relative; }
        body::after { content: "DESIGNED BY MUHAMMAD ABID RAFIQ KHAN"; position: fixed; bottom: 20px; right: 25px; font-size: 11px; font-weight: 800; letter-spacing: 3px; color: var(--primary-blue); opacity: 0.25; pointer-events: none; z-index: 9999; }
        .sovereign-pic { position: fixed; top: 25px; right: 25px; width: 60px; height: 60px; border: 2px solid var(--primary-blue); border-radius: 12px; background: url('ABID KHAN.jpg') center/cover no-repeat; box-shadow: 0 0 15px rgba(79, 195, 247, 0.3); z-index: 10000; }
        .gateway-container { background: rgba(13, 17, 23, 0.8); backdrop-filter: blur(20px); border: 1px solid var(--border); border-radius: 30px; overflow: hidden; width: 100%; max-width: 1150px; box-shadow: 0 25px 50px rgba(0,0,0,0.5); }
        .form-side { padding: 40px; border-right: 1px solid var(--border); max-height: 85vh; overflow-y: auto; }
        .preview-side { background: rgba(255,255,255,0.02); padding: 50px; text-align: center; display: flex; align-items: center; justify-content: center; }
        .master-label { font-size: 0.7rem; font-weight: 800; color: var(--primary-blue); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 5px; display: block; }
        .form-control, .form-select { background-color: var(--input-black) !important; border: 1px solid var(--border); color: #ffffff !important; border-radius: 10px; margin-bottom: 15px; }
        .virtual-id { background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; padding: 30px; width: 100%; max-width: 320px; }
        .id-photo { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary-blue); object-fit: cover; margin-bottom: 15px; }
        .btn-submit-hub { background: var(--primary-blue); color: #000; font-weight: 800; border: none; padding: 15px; border-radius: 12px; width: 100%; text-transform: uppercase; transition: 0.4s; }
        .btn-submit-hub:hover:not(:disabled) { transform: translateY(-3px); background: #fff; box-shadow: 0 10px 20px rgba(79, 195, 247, 0.3); }
        .btn-submit-hub:disabled { opacity: 0.6; cursor: not-allowed; }
    </style>
</head>
<body>

<div class="sovereign-pic"></div>

<div class="gateway-container container">
    <div class="row g-0">
        <div class="col-lg-7 form-side">
            <h2 class="fw-bold mb-1">ABID KHAN E-LEARNING HUB</h2>
            <p class="text-secondary small mb-4">Requesting Entry to the Universal Qaida Portal</p>
            
            <form id="master-signup">
                <div class="row">
                    <div class="col-md-6"><span class="master-label">Full Name</span><input type="text" id="name" class="form-control" placeholder="John Doe" required></div>
                    <div class="col-md-6"><span class="master-label">Email Address</span><input type="email" id="email" class="form-control" placeholder="name@email.com" required></div>
                </div>
                <div class="row">
                    <div class="col-md-6"><span class="master-label">Secure Password</span><input type="password" id="password" class="form-control" placeholder="Min. 8 chars" required></div>
                    <div class="col-md-6"><span class="master-label">WhatsApp Number</span><input type="tel" id="phone" class="form-control" placeholder="+92..." required></div>
                </div>
                <div class="row">
                    <div class="col-md-6"><span class="master-label">Physical Location</span><input type="text" id="location" class="form-control" placeholder="City, Country"></div>
                    <div class="col-md-6"><span class="master-label">Target Department</span>
                        <select id="course" class="form-select">
                            <option value="IT Engineering">IT Engineering</option>
                            <option value="Islamic Studies">Islamic Studies</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12"><span class="master-label">Designated Role</span>
                        <select id="role" class="form-select">
                            <option value="Student">I want to Learn (Seeker)</option>
                            <option value="Trainer">I want to Teach (Guide)</option>
                        </select>
                    </div>
                </div>
                <button type="submit" id="SignUp" class="btn-submit-hub mt-3">Execute Registration</button>
            </form>
            <p class="mt-4 small text-secondary">Already have an Identity? <a href="signin.html" class="text-info text-decoration-none fw-bold">Enter Vault</a></p>
        </div>

        <div class="col-lg-5 preview-side">
            <div class="virtual-id">
                <img src="ABID KHAN.jpg" class="id-photo" alt="Abid Khan"> 
                <h3 id="preview-name" class="fw-bold h5">Seeker Name</h3>
                <p id="preview-role" class="text-info small mb-3">Prospective Member</p>
                <div class="text-start border-top border-secondary pt-3 mt-2">
                    <small class="d-block text-secondary mb-1">LOCATION: <span id="preview-location" class="text-white fw-bold">---</span></small>
                    <small class="d-block text-secondary">DEPT: <span id="preview-course" class="text-white fw-bold">IT Engineering</span></small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- PREVIEW MIRRORING ---
        const nameInp = document.getElementById('name');
        const locInp = document.getElementById('location');
        const courseInp = document.getElementById('course');
        const roleInp = document.getElementById('role');

        nameInp.oninput = (e) => document.getElementById('preview-name').innerText = e.target.value || "Seeker Name";
        locInp.oninput = (e) => document.getElementById('preview-location').innerText = e.target.value || "---";
        courseInp.onchange = (e) => document.getElementById('preview-course').innerText = e.target.value;
        roleInp.onchange = (e) => document.getElementById('preview-role').innerText = e.target.value === "Student" ? "Seeker" : "Guide";

        // --- SUBMISSION LOGIC ---
        const form = document.getElementById('master-signup');
        const btn = document.getElementById('SignUp');

        form.onsubmit = async (e) => {
            e.preventDefault();
            
            const signupData = {
                full_name: nameInp.value.trim(),
                email: document.getElementById('email').value.trim(),
                password: document.getElementById('password').value.trim(),
                whatsapp_no: document.getElementById('phone').value.trim(),
                location: locInp.value.trim(),
                department: courseInp.value,
                role: roleInp.value
            };

            btn.disabled = true;
            btn.innerText = "AUTHENTICATING...";

            try {
                const res = await fetch('signup.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(signupData)
                });
                
                const result = await res.json();
                
                if (result.success) {
                    alert("IDENTITY SECURED: Welcome to the Hub.");
                    window.location.href = 'signin.html';
                } else {
                    alert("VAULT REJECTION: " + result.message);
                }
            } catch (err) { 
                alert("SENTINEL: Connection Failure."); 
            } finally {
                btn.disabled = false;
                btn.innerText = "EXECUTE REGISTRATION";
            }
        };
    });
</script>
</body>
</html>
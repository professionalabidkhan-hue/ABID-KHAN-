<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Blog â€” Abid Khan's E-Learning Hub</title>
   <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/professionalabidkhan-hue/ABID-KHAN-/main/ABID%20KHAN.png">
  <link rel="stylesheet" href="styleblog.css">
</head>
<body>

  <!-- Navbar -->
  <header class="abid-header">
    <nav class="abid-nav" aria-label="Main navigation">
      <button class="abid-hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </button>
      <div class="abid-nav-links" id="navLinks">
        <a href="index.html">Home</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="courses.html">Courses</a>
        <a href="tutorials.html">Tutorials</a>
        <a href="cheatsheets.html">Cheat Sheets</a>
        <a href="projects.html">Projects</a>
        <a href="blog.html">Blog</a>
        <a href="contact.html">Contact</a>
        <button id="themeToggle" class="btn-toggle">Toggle</button>
      </div>
    </nav>
  </header>

  <main class="container">
    <h1 class="page-title">Latest Blog Posts</h1>

    <div class="controls">
      <input id="searchBox" class="input" type="search" placeholder="Search posts...">
      <select id="categoryFilter">
        <option value="all">All Categories</option>
      </select>
      <select id="sortBy">
        <option value="newest">Newest First</option>
        <option value="oldest">Oldest First</option>
      </select>
    </div>

    <!-- Featured -->
    <div id="featured" class="featured" style="display:none"></div>

    <!-- Grid -->
    <section id="gridWrap">
      <div id="postsGrid" class="grid"></div>
    </section>

    <!-- Pagination -->
    <div class="pagination" id="pagination"></div>
  </main>

<div id="footer-placeholder"></div>
<script>
  fetch("footer.html")
    .then(response => response.text())
    .then(data => {
      document.getElementById("footer-placeholder").innerHTML = data;
    });
</script>

  <!-- Blogger JSONP handler -->
  <script>
    let allPosts = [];
    let filtered = [];
    let page = 1;
    const POSTS_PER_PAGE = 6;

    function handleFeed(data) {
      allPosts = data.feed.entry || [];
      if (allPosts.length === 0) {
        document.getElementById("postsGrid").innerHTML = "<p class='muted'>No posts found.</p>";
        return;
      }
      populateCategories();
      renderFeatured();
      applyFilters();
      document.getElementById('year').textContent = new Date().getFullYear();
    }

    function getTitle(p){ return p.title.$t || 'Untitled'; }
    function getLink(p){ return (p.link.find(l=>l.rel==='alternate')||{}).href || '#'; }
    function getContentText(p){ return (p.summary && p.summary.$t) ? p.summary.$t : ''; }
    function getThumb(p){ return p.media$thumbnail ? p.media$thumbnail.url : ''; }
    function getCategories(p){ return p.category ? p.category.map(c=>c.term) : []; }
    function getPublished(p){ return new Date(p.published.$t); }

    function renderFeatured(){
      const post = allPosts[0];
      if(!post) return;
      const html = `
        ${getThumb(post) ? `<img class="media" src="${getThumb(post)}" alt="${getTitle(post)}">` : ''}
        <div class="body">
          <h2>${getTitle(post)}</h2>
          <p><em>${getPublished(post).toLocaleDateString()}</em></p>
          <p>${getContentText(post).slice(0,200)}...</p>
          <a class="btn" href="${getLink(post)}" target="_blank">Read full post</a>
        </div>`;
      const box = document.getElementById('featured');
      box.innerHTML = html;
      box.style.display = 'block';
    }

    function populateCategories(){
      const set = new Set();
      allPosts.forEach(p => getCategories(p).forEach(c=>set.add(c)));
      const sel = document.getElementById('categoryFilter');
      set.forEach(cat => {
        const opt = document.createElement('option');
        opt.value = cat;
        opt.textContent = cat;
        sel.appendChild(opt);
      });
    }

    function applyFilters(){
      const qText = document.getElementById('searchBox').value.trim().toLowerCase();
      const cat = document.getElementById('categoryFilter').value;
      const sort = document.getElementById('sortBy').value;

      filtered = allPosts.filter(p=>{
        const title = getTitle(p).toLowerCase();
        const body = getContentText(p).toLowerCase();
        const matchesText = (!qText) || title.includes(qText) || body.includes(qText);
        const matchesCat = (cat === 'all') || getCategories(p).includes(cat);
        return matchesText && matchesCat;
      });

      if(sort === 'newest') filtered.sort((a,b)=> getPublished(b)-getPublished(a));
      else filtered.sort((a,b)=> getPublished(a)-getPublished(b));

      renderPage();
      renderPagination();
    }

    function renderPage(){
      const grid = document.getElementById('postsGrid');
      grid.innerHTML = '';
      const start = (page-1)*POSTS_PER_PAGE;
      const pageItems = filtered.slice(start, start + POSTS_PER_PAGE);
      if(pageItems.length === 0){
        grid.innerHTML = '<p class="muted">No posts match your search.</p>';
        return;
      }
      pageItems.forEach(p=>{
        const html = `
          <article class="card">
            ${getThumb(p) ? `<img class="thumb" src="${getThumb(p)}" alt="${getTitle(p)}">` : ''}
            <div class="content">
              <h3>${getTitle(p)}</h3>
              <small class="muted">${getPublished(p).toLocaleDateString()}</small>
              <p>${getContentText(p).slice(0,140)}...</p>
              <a class="btn" href="${getLink(p)}" target="_blank">Read</a>
            </div>
          </article>`;
        grid.insertAdjacentHTML('beforeend', html);
      });
    }

    function renderPagination(){
      const total = Math.ceil(filtered.length / POSTS_PER_PAGE);
      const wrap = document.getElementById('pagination');
      wrap.innerHTML = '';
      if(total <= 1) return;
      for(let i=1;i<=total;i++){
        const b = document.createElement('button');
        b.className = 'page-btn' + (i===page ? ' active' : '');
        b.textContent = i;
        b.onclick = () => { page=i; renderPage(); renderPagination(); window.scrollTo({top:120,behavior:'smooth'}); }
        wrap.appendChild(b);
      }
    }

    // Bind controls
    document.getElementById('searchBox').addEventListener('input', ()=> { page=1; applyFilters(); });
    document.getElementById('categoryFilter').addEventListener('change', ()=> { page=1; applyFilters(); });
    document.getElementById('sortBy').addEventListener('change', ()=> { page=1; applyFilters(); });

    // Hamburger toggle
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('navLinks');
    hamburger.addEventListener('click', () => {
      navLinks.classList.toggle('show');
      hamburger.classList.toggle('open');
    });

    // Dark mode toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });
  </script>

  <!-- Blogger JSONP feed -->
  <script src="https://abidkhanelearninghub.blogspot.com/feeds/posts/default?alt=json-in-script&callback=handleFeed"></script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reset Password - Abid Khan's E-Learning Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#0b63d3;
    --muted:#6b7280;
    --bg:#f7fafc;
    --card:#ffffff;
    --radius:12px;
    font-family: 'Inter', sans-serif;
  }

  body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#eef6ff,#f7fafc);
  }

  .form-card{
    background:var(--card);
    padding:40px;
    border-radius:var(--radius);
    box-shadow:0 12px 28px rgba(0,0,0,0.08);
    width:100%;
    max-width:400px;
    text-align:center;
  }

  .form-card img{
    width:80px;
    height:80px;
    border-radius:12px;
    object-fit:cover;
    margin-bottom:20px;
  }

  h2{margin:0 0 20px 0; font-size:1.5rem;}
  p{color:var(--muted); margin-bottom:20px;}

  input{
    width:100%;
    padding:12px 14px;
    margin-bottom:16px;
    border-radius:10px;
    border:1px solid #e6e9ef;
    font-size:1rem;
    transition: all 0.3s;
  }

  input:focus{
    border-color:var(--accent);
    outline:none;
    box-shadow:0 0 6px rgba(11,99,211,0.2);
  }

  .btn{
    width:100%;
    padding:14px;
    border-radius:12px;
    border:0;
    background:var(--accent);
    color:#fff;
    font-weight:600;
    font-size:1rem;
    cursor:pointer;
    transition: all 0.3s;
  }

  .btn:hover{background:#094ca2;}

  .footer-text{margin-top:12px; font-size:0.9rem; color:var(--muted);}
  .footer-text a{color:var(--accent); text-decoration:none;}
</style>
</head>
<body>

<div class="form-card">
  <img src="https://raw.githubusercontent.com/professionalabidkhan-hue/ABID-KHAN-/main/ABID%20KHAN.png" alt="Abid Khan">
  <h2>Reset Password</h2>
  <p>Enter the verification code sent to your email or phone and set a new password.</p>

  <form id="resetForm" onsubmit="event.preventDefault(); resetPassword();">
    <input type="email" id="email" placeholder="Email Address" required>
    <input type="text" id="verificationCode" placeholder="Verification Code" required>
    <input type="password" id="newPassword" placeholder="New Password" required>
    <button type="submit" class="btn">Reset Password</button>
  </form>

  <div class="footer-text">
    Remembered your password? <a href="signin.html">Sign In</a>
  </div>
</div>

<script>
const backendURL = "YOUR_APPS_SCRIPT_WEBAPP_URL"; // replace with your Apps Script URL

function resetPassword() {
  const email = document.getElementById("email").value;
  const code = document.getElementById("verificationCode").value;
  const newPassword = document.getElementById("newPassword").value;

  fetch(backendURL, {
    method: "POST",
    body: JSON.stringify({ action: "resetPassword", email, code, newPassword })
  })
  .then(res => res.json())
  .then(data => {
    if(data.success){
      alert("Password reset successful!");
      // Redirect to user dashboard based on role
      window.location.href = data.dashboardURL || "signin.html";
    } else {
      alert(data.message || "Verification code is incorrect or expired.");
    }
  })
  .catch(err => console.error(err));
}
</script>

</body>
</html>
